<html custom-frame=solid-with-shadow window-resizable>
<head>
    <title>noteCali settings</title>
    <link rel="stylesheet" type="text/css" href="settings.css" />


    <script>
        var f = Window.this.SettingsWin;

        Window.this.on("size", function () { document.getElementById("styleIcon").style.height = (document.offsetWidth < 200) ? "0" : "60px"; });

        function hsv_to_hsl(h, s, v) { var l = (2 - s) * v / 2; if (l != 0) { if (l == 1) { s = 0; } else if (l < 0.5) { s = s * v / (l * 2); } else { s = s * v / (2 - l * 2); } } return [h, s, l]; }
        function hslToHex(h, s, l) { l /= 100; const a = s * Math.min(l, 1 - l) / 100; const f = n => { const k = (n + h / 30) % 12; const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1); return Math.round(255 * color).toString(16).padStart(2, '0'); }; return `#${f(0)}${f(8)}${f(4)}`; }


        var selectedTab = "seT";

        function selectTab(btnName, tabName, tooltipisOn) {

            selectedTab = tabName;

            if (tooltipisOn) {
                document.getElementById("tabWithToolTip").style.display = "block";
            } else {
                document.getElementById("tabWithToolTip").style.display = "none";
            }

            var tabs = document.getElementsByClassName("tabArea");
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].style.display = "none";
            }

            var tabButtons = document.getElementsByClassName("tabButton");
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove("selected");
            }

            document.getElementById(btnName).classList.add("selected");

            document.getElementById(tabName).style.display = "block";
        }


        document.getElementById("styleBtn").onclick = function () { selectTab("styleBtn","seT",true); }
        document.getElementById("interfaceBtn").onclick = function () { selectTab("interfaceBtn","interfaceTab",true); }
        document.getElementById("systemBtn").onclick = function () { selectTab("systemBtn", "systemTab", true); }
        document.getElementById("variableBtn").onclick = function () { selectTab("variableBtn", "variablesTab", true);  }
        document.getElementById("functionBtn").onclick = function () { selectTab("functionBtn", "functionsTab", true);  }
        document.getElementById("feedbackBtn").onclick = function () { selectTab("feedbackBtn", "feedbackTab", false);  }
        document.getElementById("updatesBtn").onclick = function () { selectTab("updatesBtn", "updatesTab", false); }


        function setStyleToolTip(description, name) {
            document.getElementById("toolTip").getElementsByClassName("tip")[0].innerHTML = description;
            document.getElementById("toolTip").getElementsByClassName("header")[0].innerHTML = name;
        };


        document.getElementById("hideAppName").onmouseover = function () { setStyleToolTip("Just hide app name", "Hide app name"); }
        document.getElementById("Transparencity").onmouseover = function () { setStyleToolTip("Allow transparencity for background color. Transparencity level is driven by backgroundColor property", "Transparencity"); }
        document.getElementById("BackgroundColor").onmouseover = function () { setStyleToolTip("Set background Color. Transparencity not work if Transperencity option is not turned on", "Background Color"); }
        document.getElementById("BackgroundImage").onmouseover = function () { setStyleToolTip("Image used for background. \n !solid color is alwys faster that image!", "Background Image"); }
        document.getElementById("ErrorHighlite").onmouseover = function () { setStyleToolTip("Color of error highliting", "Error High lite"); }
        document.getElementById("VariableHighlite").onmouseover = function () { setStyleToolTip("Color of variable highliting", "Variable Highlite"); }
        document.getElementById("SuperLineHighlite").onmouseover = function () { setStyleToolTip("Color used for highliting superline if is turned off all lines are superlines", "Super Line Highlite"); }

        function settingsDefaultToolTip() {
            document.getElementById("toolTip").getElementsByClassName("tip")[0].innerHTML = "Here is style settings";
            document.getElementById("toolTip").getElementsByClassName("header")[0].innerHTML = "Style";
        }

        document.getElementById("hideAppName").onmouseleave = settingsDefaultToolTip;
        document.getElementById("Transparencity").onmouseleave = settingsDefaultToolTip;
        document.getElementById("BackgroundColor").onmouseleave = settingsDefaultToolTip;
        document.getElementById("BackgroundImage").onmouseleave = settingsDefaultToolTip;
        document.getElementById("ErrorHighlite").onmouseleave = settingsDefaultToolTip;
        document.getElementById("VariableHighlite").onmouseleave = settingsDefaultToolTip;
        document.getElementById("SuperLineHighlite").onmouseleave = settingsDefaultToolTip;

        var options = document.getElementsByClassName("option");
        for (let i = 0; i < options.length; i++) {
            options[i].addEventListener("click", (e) => {
                var sw = e.currentTarget.getElementsByClassName("inp")[0];
                console.log(e.target.tagName);
                if (e.target.tagName != "SWITCH") { sw.checked = !sw.checked; }
            }, false);
        }

        var pickers = document.getElementsByClassName("colorpicker");
        for (let i = 0; i < pickers.length; i++) {
            pickers[i].addEventListener("click", (e) => {
                console.log("cc");
                document.getElementById("pickerSelection").style.display = "block";
            }, false);
        }


        function addToNumInput(inputObject, amount) {
            if (inputObject.value == undefined) {
                inputObject.value = 0;
            } else {
                inputObject.value = inputObject.value + amount;
            }
            inputObject.focus();
        }

        var numberDecreasers = document.getElementsByClassName("rDwnB");
        for (let i = 0; i < numberDecreasers.length; i++) {
            numberDecreasers[i].addEventListener("click", (e) => {
                addToNumInput(e.target.parentElement.parentElement.getElementsByTagName("input")[0], -0.5);
                console.log(e.target.parentElement.parentElement.getElementsByTagName("input")[0].value);
            }, false);
        }

        var numberIncresers = document.getElementsByClassName("rUpB");
        for (let i = 0; i < numberDecreasers.length; i++) {
            numberIncresers[i].addEventListener("click", (e) => {
                addToNumInput(e.target.parentElement.parentElement.getElementsByTagName("input")[0], 0.5);
                console.log(e.target.parentElement.parentElement.getElementsByTagName("input")[0].value);
            }, false);
        }



        document.getElementById("pickingDone").onclick = function () { document.getElementById("pickerSelection").style.display = "none"; }



        var isMouseDown = false;
        document.getElementById("sg").addEventListener('mousedown', function () { isMouseDown = true; }, true);
        document.addEventListener('mouseup', function () { isMouseDown = false; }, true);



        var lastH, lastS, lastL, lastA;

        function setColot() {
            var color = hsv_to_hsl(document.getElementById("hueSlider").value / 360, Math.floor(lastS) / 100, Math.floor(lastL) / 100);
            document.getElementById("colorPrew").style.background = "hsl(" + color[0] * 360 + ", " + color[1] * 100 + ", " + color[2] * 100 + ")";
            document.getElementById("colorPrew").style.opacity = document.getElementById("transparencitySlider").value / 100;
            document.getElementById("colorTInput").value = hslToHex(color[0] * 360, color[1] * 100, color[2] * 100);
        }

        document.getElementById("sg").addEventListener("mousemove", (e) => {
            if (isMouseDown) {
                var yclick = e.clientY - document.getElementById("sg").getBoundingClientRect().top;
                var xclick = e.clientX - document.getElementById("sg").getBoundingClientRect().left;
                document.getElementById("dragDot").style.marginTop = yclick - 5;
                document.getElementById("dragDot").style.marginLeft = xclick - 5;

                lastL = 100 - yclick / document.getElementById("sg").getBoundingClientRect().height * 100;
                lastS = (xclick / document.getElementById("sg").getBoundingClientRect().width) * 100;
                setColot();
            }
        }, false);

        document.getElementById("hueSlider").addEventListener("change", function (evt) {
            document.getElementById("bcg").style.background = "hsl(" + document.getElementById("hueSlider").value + ", 100%, 50%)";
            setColot();
        });

        document.getElementById("transparencitySlider").addEventListener("change", function (evt) { setColot(); });

    </script>

</head>
<body>
    <div id="titleBar" role="window-caption">
        <div id="titleName">NoteCali Settings</div>
        <button id="closeB" role="window-minimize"><img src="close.svg" /></button>
    </div>
    <div id="pickerSelection">
        <div id="ColorPicker">
            <div id="colorTop">
                <div id="rss">
                    <div class="colorPrewContainer">
                        <div class="colorPrewBackground"></div>
                        <div id="colorPrew"></div>
                    </div>
                    <input type="text" id="colorTInput"></input>
                    <input type="hslider" id="transparencitySlider" max="100" value="100" step="1" />
                </div>
                <div id="lss">
                    <div class="gradientPicker">
                        <div id="bcg"></div>
                        <div class="fg"></div>
                        <div id="sg">
                            <div id="dragDot"></div>
                        </div>
                    </div>

                </div>
            </div>
            <input type="hslider" id="hueSlider" max="359" value="180" step="1" />
            <div id="btnBottom">
                <button>Save</button>
                <button id="pickingDone">Cancel</button>
            </div>
        </div>
    </div>

    <div id="botomSection">
        <div id="categoriMenu">
            <img id="styleIcon" src="filter.svg" />
            <button class="tabButton" id="styleBtn">
                <img src="color-palette.svg" />
                <div class="CLabel">Style</div>
            </button>
            <button class="tabButton" id="interfaceBtn">
                <img src="keyboard.svg" />
                <div class="CLabel">Interface</div>
            </button>
            <button class="tabButton" id="systemBtn">
                <img src="gear.svg" />
                <div class="CLabel">System</div>
            </button>
            <button class="tabButton" id="variableBtn">
                <img src="variable.svg" />
                <div class="CLabel">Variables</div>
            </button>
            <button class="tabButton" id="functionBtn">
                <img src="functions.svg" />
                <div class="CLabel">Functions</div>
            </button>

            <div id="bottomMenu">
                <button class="tabButton" id="feedbackBtn">
                    <img src="feedback.svg" />
                    <div class="CLabel">FeedBack</div>
                </button>
                <button class="tabButton" id="updatesBtn">
                    <img src="update.svg" />
                    <div class="CLabel">Updates</div>
                </button>
            </div>
        </div>

        <div id="tabWithToolTip">
            <div id="toolTip" class="toolTip">
                <div class="header">Style</div>
                <div class="tip">Here is style settings</div>
            </div>

            <div class="tabArea selected" id="seT">
                <div id="settingsArea">
                    <div class="option" id="hideAppName">
                        <div class="oLable">Hide app name</div>
                        <switch class="inp" />
                    </div>
                    <div class="option" id="Transparencity">
                        <div class="oLable">Transparencity</div>
                        <switch class="inp" />
                    </div>
                    <div class="option" id="BackgroundColor">
                        <div class="oLable">Background Color</div>
                        <div class="inp colorpicker"></div>
                    </div>
                    <div class="option" id="BackgroundImage">
                        <div class="oLable">Background Image</div>
                        <switch class="inp" />
                    </div>
                    <div class="option" id="ErrorHighlite">
                        <div class="oLable">Error Highlite</div>
                        <div class="inp colorpicker"></div>
                    </div>
                    <div class="option" id="VariableHighlite">
                        <div class="oLable">Variable Highlite</div>
                        <div class="inp colorpicker"></div>
                    </div>
                    <div class="option" id="SuperLineHighlite">
                        <div class="oLable">SuperLine Highlite</div>
                        <div class="inp colorpicker"></div>
                    </div>
                    <div class="option" id="FontSize">
                        <div class="oLable">Font Size</div>
                        <span class="inp numInput">
                            <span class="rUpB"><img src="left-arrow.png" /></span>
                            <input type="number" step="0.5" value="18"><!-- add input corection-->
                            <span class="rDwnB"><img src="right-arrow.png" /></span>
                        </span>
                    </div>
                    <div class="option" id="LinePadding">
                        <div class="oLable oLong">Padding Between Lines</div>
                        <span class="inp numInput">
                            <span class="rUpB"><img src="left-arrow.png" /></span>
                            <input type="number" step="0.5" value="2"><!-- add input corection-->
                            <span class="rDwnB"><img src="right-arrow.png" /></span>
                        </span>
                    </div>
                </div>
            </div>

            <div class="tabArea" id="interfaceTab">

            </div>
            <div class="tabArea" id="systemTab">
                <div id="settingsArea">
                    <div class="option">
                        <div class="oLable">Counting On Line End</div>
                        <switch />
                    </div>
                    <div class="option">
                        <div class="oLable">All lines Are Superines</div>
                        <switch />
                    </div>
                    <div class="option">
                        <div class="oLable">Show Line Numbers</div>
                        <switch />
                    </div>
                    <div class="option">
                        <div class="oLable">Click To Copy</div>
                        <switch />
                    </div>
                </div>
            </div>

            <div class="tabArea" id="variablesTab">
                <div class="tabAreaCentred">
                    <div class="var">
                        <div class="name">PI</div>
                        <div class="value">3.141592</div>
                        <img class="destroy" src="trash.svg"></img>
                    </div>
                    <div class="var">
                        <div class="name">sqrtTwo</div>
                        <div class="value">1.41421</div>
                        <img class="destroy" src="trash.svg"></img>
                    </div>
                    <div class="var">
                        <div class="name">minutes</div>
                        <div class="value">SYSTEM-RELATED</div>
                        <img class="destroy" src="trash.svg"></img>
                    </div>
                    <div class="var">
                        <div class="name">seconds</div>
                        <div class="value">SYSTEM-RELATED</div>
                        <img class="destroy" src="trash.svg"></img>
                    </div>
                </div>
                <img id="varAddBTN" src="add.svg"></img>
                <img id="varAddBTN" src="save.svg"></img>
            </div>

            <div class="tabArea" id="functionsTab">
                <div class="tabAreaCentred">
                    <div class="var">
                        <div class="name">sqrt</div>
                        <div class="inputs">1</div>
                        <div class="value">SYSTEM-RELATED</div>
                        <img class="destroy" src="trash.svg"></img>
                    </div>
                    <div class="var">
                        <div class="name">minToH</div>
                        <div class="inputs">2</div>
                        <div class="value">round(A/60) + B </div>
                        <img class="destroy" src="trash.svg"></img>
                    </div>
                    <div class="var">
                        <div class="name">minToH</div>
                        <div class="inputs">1</div>
                        <div class="value">round(A/60) </div>
                        <img class="destroy" src="trash.svg"></img>
                    </div>
                </div>
                <img id="varAddBTN" src="add-variable.svg"></img>
                <img id="varAddBTN" src="save.svg"></img>
            </div>
        </div>

        <div class="tabArea" id="feedbackTab">
            <input type="text" id="TopicName" class="inputElement" placeholder="*Topic Name"></input>
            <textarea type="text" id="TopicContent" class="inputElement" placeholder="*Topic.."></textarea>
            <input type="text" id="Email" class="inputElement" value="@" placeholder="Email"></input>
            <div id="TopicImage">+ Add Image</div>
            <div id="TopicSendButton">Send</div>
        </div>

        <div class="tabArea" id="updatesTab">
            <div id="uptudateBanner">
                <img src="update.svg" />
                <div class="msg">APP Is Up To Date</div>
                <div class="version">v0.1</div>
            </div>
            <div id="versionChangelog">
                <div id="versionTitle">
                    <div class="version">0.01</div>
                    <div class="type">RELEASE</div>
                </div>
                <div id="versionLog">
                    App first released
                    + superLines
                    + variables
                </div>
            </div>
        </div>


    </div>
</body>
</html>